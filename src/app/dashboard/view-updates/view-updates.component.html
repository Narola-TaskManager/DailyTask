<form [formGroup]="viewUpdateForm">

    <div class="row">
        <div class="col-sm-6">
            <select class="form-control" formControlName="projectId" (change)="onChangeProject()">
                <option value="">Select Project</option>
                <option *ngFor="let project of projectsList" [value]="project.projectId">
                    {{project.projectName}}
                </option>
            </select>
        </div>
        <div class="col-sm-6">
            <select class="form-control" formControlName="userId" (change)="onChangeEmployee(f['filterBy']['value'])">
                <option value="">Select employee</option>
                <option value="0">All</option>
                <option *ngFor="let employee of employeeList" [value]="employee.userId">
                    {{employee.userName}}
                </option>
            </select>
        </div>
    </div>

    <div class="row mt-3 ml-1" *ngIf="dailyUpdateDetail.length > 0">
        <label> Show entries</label>
        <select class="form-control select-sm ml-3" formControlName="itemsPerPage" (change)="changePagesize()">
            <option [ngValue]="5"> 5 </option>
            <option [ngValue]="3"> 3 </option>
            <option [ngValue]="2"> 2 </option>
        </select>


        <div ngbDropdown class="d-inline-block float-right ml-5">
            <div class=" float-right">
                <i class="fa fa-filter" aria-hidden="true" ngbDropdownToggle id="dropdownBasic1"></i>
                <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                    <button ngbDropdownItem (click)="onChangeEmployee('ProjectWise')">Project</button>
                    <button ngbDropdownItem (click)="onChangeEmployee('UserWise')">Employee</button>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-3" *ngIf="dailyUpdateDetail.length > 0">
        <div class="col-12">
            <div class="div-table">
                <div class="div-table-row">

                    <div class="div-table-col-lg" *ngIf="f['filterBy']['value'] === 'ProjectWise'">
                        <strong> Project</strong>
                    </div>
                    <div class="div-table-col-lg" *ngIf="f['filterBy']['value'] === 'ProjectWise'">
                        <strong>Employee </strong>
                    </div>

                    <div class="div-table-col-lg" *ngIf="f['filterBy']['value'] === 'UserWise'">
                        <strong>Employee </strong>
                    </div>
                    <div class="div-table-col-lg" *ngIf="f['filterBy']['value'] === 'UserWise'">
                        <strong> Project</strong>
                    </div>

                    <div class="div-table-col-xlg"> <strong>Task </strong></div>
                    <div class="div-table-col-xlg"><strong> Description</strong> </div>
                    <div class="div-table-col-sm"> <strong>Estimated Hour </strong></div>
                    <div class="div-table-col-sm"><strong> Actual Hour </strong></div>
                    <div class="div-table-col-lg"><strong>Status </strong> </div>
                    <div class="div-table-col-lg"> <strong>Tracker </strong></div>
                </div>
                <hr>
                <div class="div-table-row" *ngIf="f['filterBy']['value'] === 'ProjectWise'">
                    <div class="div-table-row"
                        *ngFor="let list of dailyUpdateDetail | slice: pageSize | slice: 0:f['itemsPerPage']['value']">
                        <div class="div-table-col-lg"> {{list.projectName}}</div>
                        <div class="div-table-row" *ngFor="let task of list.userTaskList ; let j= index;">
                            <div class="div-table-col-lg"> {{task.userName}}</div>
                            <div class="div-table-row mb-2" *ngFor="let detail of task.taskList; let i= index;">
                                <hr *ngIf="i !== 0">
                                <div class="div-table-col-xlg">{{detail.taskMasterTitle}} </div>
                                <div class="div-table-col-xlg">{{detail.taskDesc}} </div>
                                <div class="div-table-col-sm">{{detail.estHr}} </div>
                                <div class="div-table-col-sm">{{detail.actualHr}} </div>
                                <div class="div-table-col-lg">{{detail.statusTitle}} </div>
                                <div class="div-table-col-lg" *ngIf="detail.isTrackerUsed">
                                    Used Tracker
                                </div>
                                <div class="div-table-col-lg" *ngIf="!detail.isTrackerUsed">
                                    Without Tracker
                                </div>
                            </div>
                        </div>
                        <hr>
                    </div>
                </div>

                <div class="div-table-row mb-3" *ngIf="f['filterBy']['value'] === 'UserWise'">
                    <div
                        *ngFor="let list of dailyUpdateDetail | slice: pageSize | slice: 0:f['itemsPerPage']['value'] ">
                        <div class="div-table-col-lg"> {{list.userName}}</div>
                        <div class="div-table-row mb-2">
                            <div *ngFor="let project of list.projectList ; let j= index;">
                                <div class="div-table-row">
                                    <div class="div-table-col-lg"> {{project.projectName}}</div>
                                    <div class="div-table-row" *ngFor="let detail of project.taskList; let i= index;">
                                        <hr *ngIf="i !== 0 && project.taskList.length >= 1">
                                        <div class="div-table-col-xlg">{{detail.taskMasterTitle}} </div>
                                        <div class="div-table-col-xlg">{{detail.taskDesc}} </div>
                                        <div class="div-table-col-sm">{{detail.estHr}} </div>
                                        <div class="div-table-col-sm">{{detail.actualHr}} </div>
                                        <div class="div-table-col-lg">{{detail.statusTitle}} </div>
                                        <div class="div-table-col-lg" *ngIf="detail.isTrackerUsed">
                                            Used Tracker
                                        </div>
                                        <div class="div-table-col-lg" *ngIf="!detail.isTrackerUsed">
                                            Without Tracker
                                        </div>
                                    </div>
                                </div>
                                <hr *ngIf="list.projectList.length > 1 && j !== (list.projectList.length-1)">
                            </div>
                        </div>
                        <hr>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4 float-right" *ngIf="dailyUpdateDetail.length > 0">
        <div class="col-12">
            <ngb-pagination [collectionSize]="dailyUpdateDetail.length" #numPages
                [pageSize]="f['itemsPerPage']['value']" [(page)]="currentPage" (pageChange)="onPageChange(currentPage)">
            </ngb-pagination>
        </div>
    </div>

</form>